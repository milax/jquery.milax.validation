/*

jQuery Milax Validation v1.2
jQuery Plugin
Latest Update: 08.06.2012

Author: Eugene Kuzmin
Copyright: 2011-12, Eugene Kuzmin

-----------------------------------------------------------------------*/
(function($){$.fn.mxValidation=function(settings){var options=jQuery.extend({errMsgClass:".mxError",fieldHasErrorClass:".mxNotValidated",fieldsToValidateSelector:".mxValidate",btnSubmitSelector:".btnSubmit",fieldHolderSelector:"dd",isValidFunc:false},settings),$fieldsets=this;this.init=function(){operateAllFieldsets();$fieldsets.on("keyup",options.fieldsToValidateSelector,fieldKeyUpHandler);$fieldsets.on("click",options.btnSubmitSelector,submitBtnHandler)};var operateAllFieldsets=function(){$fieldsets.each(function(){var $currFieldset=
$(this);$currFieldset.find(options.errMsgClass).hide()})};var fieldKeyUpHandler=function(event){var $focusedField=$(this),$fieldset=$(event.delegateTarget);if(event.keyCode==13)$fieldset.find(options.btnSubmitSelector).click()};var submitBtnHandler=function(event){var $btnSubmit=$(this),$fieldset=$(event.delegateTarget),$fieldsToValidate=$fieldset.find(options.fieldsToValidateSelector),valRes=doFieldsValidation($fieldsToValidate);if(valRes&&typeof options.isValidFunc==="function")options.isValidFunc($btnSubmit,
$fieldset);return valRes};var doFieldsValidation=function($fieldsToValidate){var isValid=true,validationClasses=new Array("mxRequired","mxEmail","mxNumber","mxMax","mxMin","mxAtLeastOne");$fieldsToValidate.each(function(){var $input=$(this);$input.parents(options.fieldHolderSelector).find(options.errMsgClass).hide();$input.removeClass(options.fieldHasErrorClass.substr(1));for(var i in validationClasses){var currClass=validationClasses[i];if($input.hasClass(currClass)&&!isFieldValid(currClass,$input)){isValid=
false;return true}}});return isValid};var isFieldValid=function(way,$what2Validate){var val=$.trim($what2Validate.val()),opts=$what2Validate.data("mxvalidateOptions"),$errMsg=$what2Validate.parents(options.fieldHolderSelector).find(options.errMsgClass+"."+way),isValid=true;switch(way){case "mxRequired":isValid=!!val;break;case "mxEmail":var pattern=/^([a-zA-Z0-9._%-+]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4})*$/;isValid=!(val.match(pattern)===null);break;case "mxNumber":var pattern=/^\d*$/;isValid=!(val.match(pattern)===
null);break;case "mxMax":var maxLength=opts.max;isValid=!(val.length>maxLength);break;case "mxMin":var minLength=opts.min;isValid=!(val.length<minLength);break;case "mxAtLeastOne":var $checkedCheckboxes=$what2Validate.find('input[type="checkbox"]:checked');isValid=!($checkedCheckboxes.length===0);break;default:isValid=false}if(!isValid)showErrorMsg($errMsg,$what2Validate);return isValid};var showErrorMsg=function($errorMsg,$what2Validate){$errorMsg.css({display:"block"});$what2Validate.addClass(options.fieldHasErrorClass.substr(1))};
this.init()}})(jQuery);